import{g as p,r as d,a as b,u as g,j as e}from"./index-BDDrCBjG.js";import{c as f,a as o,F as j,b as y,d as i}from"./index.esm-CaE4GhmE.js";import{a as S}from"./axios-BimPEqV4.js";import{Q as N,B as c,H as v}from"./ReactToastify-X-PYeDry.js";import{u as C}from"./user-DSAdG6uF.js";import"./hoist-non-react-statics.cjs-DQogQWOa.js";const n=S.create({baseURL:"https://backend-cohort2b-practice-a27h.vercel.app"}),B=f().shape({title:o().min(2,"Too Short!").max(50,"Too Long!").required("Required"),body:o().min(2,"Too Short!").required("Required"),author:o().required("Required")}),U=()=>{let{slug:r}=p(),[a,u]=d.useState(null),h=b(C);d.useEffect(()=>{n.get("/api/blog/"+r).then(t=>{u(t.data)}).catch(t=>{console.log(t)})},[]);let m=g();const s=t=>c.success(t,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"dark",transition:v}),x=()=>c.dismiss();return e.jsxs("div",{className:"flexCol mt-5 min-h-[70vh] ",children:[e.jsx("h1",{children:"Update Blog"}),a&&e.jsx(j,{initialValues:{title:a.title,body:a.body,author:a.author},validationSchema:B,onSubmit:t=>{s("Please Wait..."),n.patch("/api/blog",{...t,id:r,email:h.data.email},{headers:{"Access-Control-Allow-Origin":"*"}}).then(l=>{x(),s("Blog Updated Successfully!!"),setTimeout(()=>{m("/blog")},5e3)}).catch(l=>{s(l.message)})},children:({errors:t,touched:l})=>e.jsxs(y,{className:"flexCol p-5 rounded shadow-lg  ",children:[e.jsxs("fieldset",{className:"flexColStart gap-4",children:[e.jsx("label",{htmlFor:"title",children:"Title"}),e.jsx(i,{placeholder:"Your title",className:"inputStyle",id:"title",name:"title"})]}),t.title&&l.title?e.jsx("div",{className:"text-left text-red-700 w-full text-[12px]",children:t.title}):null,e.jsxs("fieldset",{className:"flexColStart gap-4",children:[e.jsx("label",{htmlFor:"author",children:"Author"}),e.jsx(i,{placeholder:"Your author",className:"inputStyle",id:"author",name:"author"})]}),t.author&&l.author?e.jsx("div",{className:"text-left text-red-700 w-full text-[12px]",children:t.author}):null,e.jsxs("fieldset",{className:"flexColStart gap-4",children:[e.jsx("label",{htmlFor:"body",children:"Body"}),e.jsx(i,{placeholder:"Your body",className:"inputStyle",id:"body",name:"body",as:"textarea"})]}),t.body&&l.body?e.jsx("div",{className:"text-left text-red-700 w-full text-[12px]",children:t.body}):null,e.jsx("button",{className:"mt-5 border border-1 py-1 px-3 rounded hover:bg-green-500 hover:text-white ",type:"submit",children:"Update"})]})}),e.jsx(N,{})]})};export{U as default};
