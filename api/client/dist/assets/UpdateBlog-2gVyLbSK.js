import{g as b,r as d,a as g,u as f,j as e}from"./index-VxRWjDM4.js";import{c as j,a as o,F as y,b as S,d as i}from"./index.esm-DmIiQFoO.js";import{a as u,b as n}from"./baseUrl-Dzc0npcP.js";import{Q as N,B as c,H as v}from"./ReactToastify-zfl6Xge4.js";import{u as B}from"./user-DpgZbPgV.js";import"./hoist-non-react-statics.cjs-DQogQWOa.js";const C=j().shape({title:o().min(2,"Too Short!").max(50,"Too Long!").required("Required"),body:o().min(2,"Too Short!").required("Required"),author:o().required("Required")}),k=()=>{let{slug:r}=b(),[a,m]=d.useState(null),h=g(B);d.useEffect(()=>{u.get(n+"/api/blog/"+r).then(t=>{m(t.data)}).catch(t=>{console.log(t)})},[]);let x=f();const s=t=>c.success(t,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"dark",transition:v}),p=()=>c.dismiss();return e.jsxs("div",{className:"flexCol mt-5 min-h-[70vh] ",children:[e.jsx("h1",{children:"Update Blog"}),a&&e.jsx(y,{initialValues:{title:a.title,body:a.body,author:a.author},validationSchema:C,onSubmit:t=>{s("Please Wait..."),u.patch(n+"/api/blog",{...t,id:r,email:h.data.email}).then(l=>{p(),s("Blog Updated Successfully!!"),setTimeout(()=>{x("/blog")},5e3)}).catch(l=>{s(l.message)})},children:({errors:t,touched:l})=>e.jsxs(S,{className:"flexCol p-5 rounded shadow-lg  ",children:[e.jsxs("fieldset",{className:"flexColStart gap-4",children:[e.jsx("label",{htmlFor:"title",children:"Title"}),e.jsx(i,{placeholder:"Your title",className:"inputStyle",id:"title",name:"title"})]}),t.title&&l.title?e.jsx("div",{className:"text-left text-red-700 w-full text-[12px]",children:t.title}):null,e.jsxs("fieldset",{className:"flexColStart gap-4",children:[e.jsx("label",{htmlFor:"author",children:"Author"}),e.jsx(i,{placeholder:"Your author",className:"inputStyle",id:"author",name:"author"})]}),t.author&&l.author?e.jsx("div",{className:"text-left text-red-700 w-full text-[12px]",children:t.author}):null,e.jsxs("fieldset",{className:"flexColStart gap-4",children:[e.jsx("label",{htmlFor:"body",children:"Body"}),e.jsx(i,{placeholder:"Your body",className:"inputStyle",id:"body",name:"body",as:"textarea"})]}),t.body&&l.body?e.jsx("div",{className:"text-left text-red-700 w-full text-[12px]",children:t.body}):null,e.jsx("button",{className:"mt-5 border border-1 py-1 px-3 rounded hover:bg-green-500 hover:text-white ",type:"submit",children:"Update"})]})}),e.jsx(N,{})]})};export{k as default};
